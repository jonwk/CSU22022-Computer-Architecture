library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

entity ControlMemory is
Port (  FL : out std_logic; -- 0
        RZ : out std_logic; -- 1
        RN : out std_logic; -- 2
        RC : out std_logic; -- 3
        RV : out std_logic; -- 4
        MW : out std_logic; -- 5
        MM : out std_logic; -- 6
        RW : out std_logic; -- 7
        MD : out std_logic; -- 8
        FS : out std_logic_vector(4 downto 0); -- 9 to 13
        MB : out std_logic; -- 14
        TB : out std_logic; -- 15
        TA : out std_logic; -- 16
        TD : out std_logic; -- 17
        PL : out std_logic; -- 18
        PI : out std_logic; -- 19
        IL : out std_logic; -- 20
        MC : out std_logic; -- 21
        MS : out std_logic_vector(2 downto 0); -- 22 to 24
        NA : out std_logic_vector(16 downto 0); -- 25 to 41
        IN_CAR : in unsigned(16 downto 0));
end ControlMemory;

architecture Behavioral of ControlMemory is
type mem_array is array(0 to 255) of std_logic_vector(41 downto 0);

begin

memory_m: process(IN_CAR)
    variable control_mem : mem_array:=(
-- |4               2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1               5|4 2|1|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- |Next Add         | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- |Next Add         | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
  "0" & x"00fe"  &  b"001_0_0_0_0_0_0_0_1_00010_0_1_0_0_0_0_0_0_1", -- 00 - ADI  D   =  A + B  - Add Immediate Operator
  "0" & x"00fe"  &  b"001_0_0_0_0_0_0_0_0_00000_1_1_0_0_0_0_0_0_1", -- 01 - LDR  D  <=  A      - Load Operator
  "0" & x"00fe"  &  b"001_0_0_0_0_0_0_0_0_10100_0_1_0_0_0_0_0_0_1", -- 02 - SR   D  <<  B      - Shift Right Operator
  "0" & x"00fe"  &  b"001_0_0_0_0_0_0_0_0_00001_0_1_0_0_0_0_0_0_1", -- 03 - INC  D   =  A + 1  - Increment Operator     
  "0" & x"00fe"  &  b"001_0_0_0_0_0_0_0_0_01110_0_1_0_0_0_0_0_0_1", -- 04 - NOT  D   = ~A      - Not Operator
  "0" & x"00fe"  &  b"001_0_0_0_0_0_0_0_0_00010_0_1_0_0_0_0_0_0_1", -- 05 - ADD  D   = A + B   - Addition Operator
  "0" & x"00fe"  &  b"001_0_0_0_1_0_0_0_0_00000_0_0_0_0_0_0_0_0_1", -- 06 - B    B   
  "0" & x"00fe"  &  b"111_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_1", -- 07 - BNE  B   
  "0" & x"00fe"  &  b"001_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_1", -- 08 - NOP 
  "0" & x"00fe"  &  b"001_0_0_0_0_0_0_0_0_10100_0_1_0_0_0_0_0_0_1", -- 09 - STR  D  B
  "0" & x"00fe"  &  b"001_0_0_0_0_0_0_0_0_00110_0_1_0_0_0_0_0_0_1", -- 0a - DEC  D  = A - 1    - Decrement Operator
  b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 0B
  b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 0C
  b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 0D
  b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 0E
  b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 0F

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 10
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 11
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 12
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 13
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 14
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 15
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 16
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 17
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 18
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 19
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 1A
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 1B
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 1C
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 1D
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 1E
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 1F

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 20
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 21
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 22
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 23
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 24
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 25
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 26
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 27
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 28
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 29
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 2A
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 2B
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 2C
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 2D
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 2E
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 2F

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 30
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 31
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 32
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 33
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 34
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 35
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 36
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 37
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 38
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 39
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 3A
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 3B
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 3C
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 3D
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 3E
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 3F

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 40
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 41
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 42
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 43
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 44
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 45
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 46
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 47
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 48
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 49
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 4A
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 4B
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 4C
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 4D
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 4E
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 4F

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 50
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 51
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 52
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 53
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 54
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 55
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 56
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 57
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 58
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 59
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 5A
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 5B
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 5C
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 5D
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 5E
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 5F

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 60
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 61
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 62
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 63
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 64
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 65
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 66
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 67
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 68
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 69
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 6A
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 6B
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 6C
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 6D
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 6E
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 6F

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 70
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 71
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 72
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 73
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 74
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 75
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 76
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 77
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 78
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 79
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 7A
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 7B
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 7C
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 7D
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 7E
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 7F

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 80
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 81
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 82
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 83
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 84
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 85
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 86
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 87
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 88
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 89
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 8A
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 8B
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 8C
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 8D
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 8E
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 8F

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 90
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 91
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 92
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 93
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 94
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 95
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 96
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 97
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 98
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 99
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 9A
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 9B
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 9C
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 9D
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 9E
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- 9F

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- A0
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- A1
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- A2
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- A3
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- A4
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- A5
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- A6
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- A7
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- A8
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- A9
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- AA
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- AB
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- AC
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- AD
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- AE
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- AF

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- B0
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- B1
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- B2
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- B3
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- B4
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- B5
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- B6
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- B7
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- B8
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- B9
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- BA
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- BB
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- BC
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- BD
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- BE
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- BF


-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- C0
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- C1
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- C2
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- C3
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- C4
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- C5
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- C6
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- C7
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- C8
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- C9
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- CA
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- CB
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- CC
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- CD
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- CE
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- CF

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- D0
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- D1
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- D2
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- D3
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- D4
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- D5
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- D6
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- D7
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- D8
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- D9
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- DA
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- DB
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- DC
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- DD
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- DE
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- DF

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- E0
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- E1
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- E2
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- E3
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- E4
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- E5
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- E6
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- E7
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- E8
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- E9
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- EA
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- EB
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- EC
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- ED
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- EE
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- EF

-- |4                2|2 2|2|2|1|1|1|1|1|1|1   0|0|0|0|0|0|0|0|0|0|
-- |1                5|4 2|2|0|9|8|7|6|5|4|3   9|8|7|6|5|4|3|2|1|0|
-- | Next Address     | MS|M|I|P|P|T|T|T|M| FS  |M|R|M|M|R|R|R|R|F|
-- | Next Address     | MS|C|L|I|L|D|A|B|B| FS  |D|W|M|W|V|C|N|Z|L|
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- F0
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- F1
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- F2
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- F3
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- F4
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- F5
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- F6
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- F7
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- F8
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- F9
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- FA
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- FB
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- FC
   b"00000000000000000_000_0_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0", -- FD
   b"00000000011111111_000_0_1_1_0_0_0_0_0_00000_0_0_1_0_0_0_0_0_0", -- FE - Instr fetching
   b"00000000000000000_001_1_0_0_0_0_0_0_0_00000_0_0_0_0_0_0_0_0_0"  -- FF - Exit Signal
    );
variable addr : integer := 0;
variable control_out : std_logic_vector(41 downto 0);

begin
    addr := conv_integer(IN_CAR);
    control_out := control_mem(addr);
    FL <= control_out(0);
    RZ <= control_out(1);
    RN <= control_out(2);
    RC <= control_out(3);
    RV <= control_out(4);
    MW <= control_out(5);
    MM <= control_out(6);
    RW <= control_out(7);
    MD <= control_out(8);
    FS <= control_out(13 downto 9);
    MB <= control_out(14);
    TB <= control_out(15);
    TA <= control_out(16);
    TD <= control_out(12);
    PL <= control_out(17);
    PI <= control_out(19);
    IL <= control_out(20);
    MC <= control_out(21);
    MS <= control_out(24 downto 22);
    NA <= control_out(41 downto 25);
    end process;
end Behavioral;
